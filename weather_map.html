<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/weather_map_style.css">
</head>
<body>
<main class="container">
    <h1>Weather Application</h1>
    <div class="weather-display">
        <h2 id="cityName" class="text-center"></h2>
        <div class="row">
            <div class="col-md-4 box" id="boxFirst"></div>
            <div class="col-md-4 box" id="boxSecond"></div>
            <div class="col-md-4 box-last" id="boxThird"></div>
        </div>
    </div>
    <div id="map-canvas"></div>

</main>
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/bootstrap.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBXYZuPj86pM5aGUm-Gv_P4HHxOcWOu6IU"></script>
<script>
    $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
        APPID: "c458a07f7c5e54192932e48071aecbd2",
        units: "imperial",
        q:      "San Antonio, TX"
    }).done(function(data) {
        console.log(data);
        fillData(data);
    }).fail(function (error) {
        console.log(error);
    });

    function fillData(data) {
        $("#cityName").html(data.city.name);
        $("#boxFirst").html(
                "<span>" + data.list[0].temp.max + "&#176; /" + data.list[0].temp.min + "&#176" + "</span><br>"
                + "<img src=http://openweathermap.org/img/w/"+data.list[0].weather[0].icon+".png><br>"
                + "<strong>Clouds:</strong> " + data.list[0].weather[0].description + "<br>"
                + "<strong>Humidity:</strong> " + data.list[0].humidity + "<br>"
                + "<strong>Wind:</strong> " + data.list[0].speed + "<br>"
                + "<strong>Pressure:</strong> " + data.list[0].pressure
        );
        $("#boxSecond").html(
                "<span>" + data.list[1].temp.max + "&#176; /" + data.list[1].temp.min + "&#176" + "</span><br>"
                + "<img src=http://openweathermap.org/img/w/"+data.list[1].weather[0].icon+".png><br>"
                + "<strong>Clouds:</strong> " + data.list[1].weather[0].description + "<br>"
                + "<strong>Humidity:</strong> " + data.list[1].humidity + "<br>"
                + "<strong>Wind:</strong> " + data.list[1].speed + "<br>"
                + "<strong>Pressure:</strong> " + data.list[1].pressure
        );
        $("#boxThird").html(
                "<span>" + data.list[2].temp.max + "&#176; /" + data.list[2].temp.min + "&#176" + "</span><br>"
                + "<img src=http://openweathermap.org/img/w/"+data.list[2].weather[0].icon+".png><br>"
                + "<strong>Clouds:</strong> " + data.list[2].weather[0].description + "<br>"
                + "<strong>Humidity:</strong> " + data.list[2].humidity + "<br>"
                + "<strong>Wind:</strong> " + data.list[2].speed + "<br>"
                + "<strong>Pressure:</strong> " + data.list[2].pressure
        );

    }

    function fillMap() {
        $.get("http://api.openweathermap.org/data/2.5/forecast/daily", {
            APPID: "c458a07f7c5e54192932e48071aecbd2",
            units: "imperial",
            lat: myMarker.getPosition().lat(),
            lon: myMarker.getPosition().lng()
        }).done(function(data) {
            console.log(data);
            fillData(data);
            map.setCenter(data);
        }).fail(function (error) {
            console.log(error);
        });
    }

    $("#sendCoordinates").click(function() { //press button to gather lat and long and send it to fillMap
        var latitude = $("#latitude").val();
        var longitude = $("#longitude").val();
        fillMap(latitude, longitude);
    });


//    setMap(29.426791,-98.489602);

    var myMarker = new google.maps.Marker({
        position: new google.maps.LatLng(29.426791,-98.489602),
        draggable: true
    });
    var mapOptions = {
        zoom: 10
    };
    var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
    map.setCenter(myMarker.position);
    myMarker.setMap(map);








</script>

</body>
</html>